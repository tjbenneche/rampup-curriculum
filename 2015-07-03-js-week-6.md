# A Deeper Dive into jQuery

Last week we learned how to select individual elements, change some of their basic style attributes, and add event listeners to them.

Where you really begin to see the power of jQuery is in elements' relational data â€” traversing up and down the DOM to find parents, children, siblings, etc.

## Class Workflow

1. Review last week's homework
2. Optimizing specifity - how best to select elements
3. $(this) - how it differs from JavaScript's native "this", when to use it
5. Chaining functions
6. DOM traversal - parents, children, siblings, adding and removing data
7. Discuss homework!

## Optimizing Specificity

While it is convienent to select elements using only jQuery's object notation $(''), it is not always the most efficient.

The magic that makes jQuery's selector notation work is a JavaScript engine called [Sizzle](http://sizzlejs.com/). 

Take, for instance, the following lookup:

	$('#myDiv p.inner-text')
    
Because this is an _ancestor descendant_ selector, jQuery's Sizzle engine will read it right-to-left. It will search the entire DOM for### elementsOptimizing matchingSpecificity "p.inner-text" and then return ones that are descendants of #myDiv. It's easy to see how this could slow down performance as the size and complexity of your web page increases.

A better way to write this would be to separate out the ID selector and search for the element within it:

	$('#myDiv').find('p.inner-text')

The jQuery .find() method uses its Sizzle enigne as well, but an ID selector is extremely fast because it is just an alias for the browser's native document.getElementById function.

A closing thought:

Only be as specific as it makes sense to be: chaining 3 or more selectors together actually increases the amount of work the browser has to do. If it's an ID, just use that, and otherwise stick to two.

## Traversing the DOM



### this and $(this)



[https://twitter.com/bhalp1/status/578925947245633536](https://twitter.com/bhalp1/status/578925947245633536)

this is raw JS, $(this) is jQuery

$() is the jQuery constructor function.

this is a reference to the DOM element of invocation.

so basically, in $(this), you are just passing the this in $() as a parameter so that you could call jQuery methods and functions.

### Parents, Children, and Siblings

traversing

// Selecting an element's direct parent:
 
// returns [ div.child ]
$( "span.subchild" ).parent();
 
// Selecting all the parents of an element that match a given selector:
 
// returns [ div.parent ]
$( "span.subchild" ).parents( "div.parent" );
 
// returns [ div.child, div.parent, div.grandparent ]
$( "span.subchild" ).parents();
 
// Selecting all the parents of an element up to, but *not including* the selector:
 
// returns [ div.child, div.parent ]
$( "span.subchild" ).parentsUntil( "div.grandparent" );
 
// Selecting the closest parent, note that only one parent will be selected
// and that the initial element itself is included in the search:
 
// returns [ div.child ]
$( "span.subchild" ).closest( "div" );
 
// returns [ div.child ] as the selector is also included in the search:
$( "div.child" ).closest( "div" );

children:

// Selecting an element's direct children:
 
// returns [ div.parent, div.surrogateParent1, div.surrogateParent2 ]
$( "div.grandparent" ).children( "div" );
 
// Finding all elements within a selection that match the selector:
 
// returns [ div.child, div.parent, div.surrogateParent1, div.surrogateParent2 ]
$( "div.grandparent" ).find( "div" );

siblings:

next, prev, siblings

.closest()


## Chaining

don't query the DOM as much

## Resources

[http://learn.jquery.com/performance/optimize-selectors/](http://learn.jquery.com/performance/optimize-selectors/)

## Homework
